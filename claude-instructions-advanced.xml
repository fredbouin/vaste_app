<?xml version="1.0" encoding="UTF-8"?>

<ProjectBrief>
  <ProjectTitle>Furniture Pricing Application for Vaste</ProjectTitle>
  <context>
    You are a senior full-stack developer working on a furniture pricing calculator app. This app enables users to create pricing entries for whole pieces as well as reusable components. Pieces can incorporate components, and the manufacturing cost calculations (including overhead and CNC rates) for pieces are computed server side.
  </context>

  <ProjectDescription>
    An application designed to streamline furniture pricing for Vaste, incorporating a modular calculator, adjustable settings, and a comprehensive price list system. This application is utilized to efficiently calculate the production cost of furniture items, including customizable pieces and reusable components.
  </ProjectDescription>

  <Modules>
    <Module name="Calculator">
      <Description>
        The calculator offers two distinct modes: Pieces and Components. Both modes share the same functionality, with the Components mode allowing the creation of reusable parts to be integrated into multiple furniture pieces.
      </Description>
      <Panels>
        <Panel name="Piece Information">
          <Functionality>
            Captures basic details, distinguishing between a piece or a component, managing collection details, piece numbers, and variations.
          </Functionality>
        </Panel>
        <Panel name="Labor">
          <Functionality>
            Allows input of labor hours segmented by production categories:
            <Categories>
              <Category name="Stock Production" rate="$21.00/hr"/>
              <Category name="CNC Operator" rate="$25.00/hr"/>
              <Category name="Assembly" rate="$25.00/hr"/>
              <Category name="Finishing" rate="$25.00/hr"/>
              <Category name="Upholstery" rate="$24.00/hr"/>
            </Categories>
            Includes an adjustable surcharge percentage (default 8%).
          </Functionality>
        </Panel>
        <Panel name="Materials">
          <Functionality>
            Manages material costs subdivided into the following categories:
            <Categories>
              <Category name="Wood Materials"/>
              <Category name="Sheet Materials"/>
              <Category name="Upholstery Materials"/>
              <Category name="Hardware"/>
              <Category name="Finishing Materials"/>
            </Categories>
          </Functionality>
        </Panel>
        <Panel name="CNC Machine">
          <Functionality>
            Captures CNC machine runtime and calculates total machining costs based on the input runtime and a defined hourly rate ($11.39/hr).
          </Functionality>
        </Panel>
        <Panel name="Summary">
          <Functionality>
            Consolidates and presents an itemized summary of costs, including labor, materials, CNC machine, overhead, and any components used. Provides total calculated costs clearly and concisely.
          </Functionality>
        </Panel>
      </Panels>
    </Module>

    <Module name="Settings">
      <Description>
        Allows users to configure and persist rates and variables that the calculator relies upon, influencing the calculations across the entire application. Changes to settings automatically trigger synchronization of existing price calculations to maintain data consistency.
      </Description>
      <SettingsCategories>
        <Category name="Labor Rates">
          <Subcategories>
            <Rate name="Labor Surcharge (%)" value="8.00%"/>
            <Rate name="Stock Production" value="$21.00/hr"/>
            <Rate name="CNC Operator" value="$25.00/hr"/>
            <Rate name="Assembly" value="$25.00/hr"/>
            <Rate name="Finishing" value="$25.00/hr"/>
            <Rate name="Upholstery" value="$24.00/hr"/>
          </Subcategories>
        </Category>
        <Category name="CNC Machine Rate">
          <Subcategories>
            <Rate name="Total Machine Rate" value="$11.39/hr"/>
            <Rate name="Base Rate" value="$10.00/hr"/>
            <Rate name="Added Tool Cost" value="$0.93/hr"/>
            <Rate name="Added Equipment Cost" value="$0.46/hr"/>
            <Rate name="Monthly Operating Hours" value="180"/>
          </Subcategories>
        </Category>
        <Category name="Materials Pricing">
          <Materials>
            <MaterialType name="Wood Species">
              <Item name="White Oak">
                <Dimensions thickness="4/4" cost="$7.39/BF"/>
                <Dimensions thickness="5/4" cost="$8.79/BF"/>
                <Dimensions thickness="6/4" cost="$8.99/BF"/>
                <Dimensions thickness="8/4" cost="$10.69/BF"/>
              </Item>
              <!-- Additional species structured similarly -->
            </MaterialType>
            <MaterialType name="Sheet Materials">
              <Item name="Baltic Birch Plywood" size="4x8" type="plywood" thickness="3/8" cost="$69.59/sheet"/>
              <!-- Additional sheet materials structured similarly -->
            </MaterialType>
            <MaterialType name="Upholstery Materials">
              <Item name="Leather Standard" type="leather" cost="$7.7/sq ft"/>
              <!-- Additional upholstery materials structured similarly -->
            </MaterialType>
            <MaterialType name="Hardware">
              <Item name="jcb(70mm)" pack="10 units" cost="$6.7"/>
              <!-- Additional hardware items structured similarly -->
            </MaterialType>
            <MaterialType name="Finishing Materials">
              <Item name="Osmo Oil Stain" coverage="258 ft²/L" cost="$108.30/L"/>
              <!-- Additional finishing materials structured similarly -->
            </MaterialType>
          </Materials>
        </Category>
        <Category name="Overhead">
          <Parameters>
            <Parameter name="Monthly Overhead" value="$30,000.00"/>
            <Parameter name="Number of Employees" value="5"/>
            <Parameter name="Monthly Hours per Employee" value="120"/>
            <Parameter name="Monthly CNC Hours" value="140"/>
            <Parameter name="Calculated Recovery Rate" value="$40.54/hr"/>
          </Parameters>
        </Category>
        <Category name="Margin Settings">
          <Parameters>
            <Parameter name="Wholesale Margin" value="10.0%" markup="×1.11"/>
            <Parameter name="MSRP Margin" value="30.0%" markup="×1.43"/>
          </Parameters>
        </Category>
      </SettingsCategories>
    </Module>

    <Module name="Price Sheet">
      <Description>
        Provides a categorized, comprehensive list of priced furniture pieces and reusable components. Supports functionalities to copy, edit, delete, and synchronize item costs based on updated calculator settings and edited components.
      </Description>
      <Functionalities>
        <Functionality>View itemized cost breakdowns</Functionality>
        <Functionality>Sort and manage pieces by collection</Functionality>
        <Functionality>Sync costs after settings adjustments</Functionality>
      </Functionalities>
    </Module>
  </Modules>

  <TechnicalSpecifications>
    <FrontEnd>
      <Technologies>
        <Technology>React.js (Vite)</Technology>
        <Technology>Tailwind CSS</Technology>
      </Technologies>
      <Structure>Structured into clear components and hooks, leveraging state management via useState and useEffect for dynamic UI behavior.</Structure>
    </FrontEnd>
    <BackEnd>
      <Technologies>
        <Technology>Express.js Server</Technology>
        <Technology>MongoDB</Technology>
      </Technologies>
      <DataManagement>
        <Method>Stores settings, price sheet entries, model templates, and projects.</Method>
        <Synchronization>API endpoints facilitate real-time synchronization and data consistency.</Synchronization>
      </DataManagement>
    </BackEnd>
  </TechnicalSpecifications>

  <DevelopmentRequirements>
    <Requirement>Ensure robust error handling and fallback mechanisms</Requirement>
    <Requirement>Maintain high clarity and UX for non-technical users</Requirement>
    <Requirement>Scalable architecture accommodating future feature additions</Requirement>
  </DevelopmentRequirements>

  <UseCaseExamples>
    <Example>Creating a reusable "seat" component used in multiple chairs.</Example>
    <Example>Adjusting the hourly rate of CNC operation and synchronizing all affected furniture pieces and components instantly.</Example>
  </UseCaseExamples>

</ProjectBrief>
